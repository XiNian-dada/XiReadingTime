/* 1.3.0优化版阅读时间插件样式 - 支持自动适应主题颜色 */

/* ===== 基础样式 ===== */
.reading-time-box {
    display: flex;
    align-items: center;
    padding: 8px 15px;
    margin: 12px 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
    line-height: 1.4;
    gap: 8px;
    transition: all 0.3s ease;
}

.reading-time-box:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transform: translateY(-1px);
}

.reading-time-icon {
    font-size: 18px;
    flex-shrink: 0;
    transition: transform 0.3s ease;
}

.reading-time-box:hover .reading-time-icon {
    transform: scale(1.1);
}

.reading-time-text {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 4px;
}

.reading-time-minutes {
    font-weight: bold;
    transition: all 0.3s ease;
}

.reading-time-box:hover .reading-time-minutes {
    transform: scale(1.05);
}

.reading-time-details {
    margin-left: auto;
    display: flex;
    gap: 8px;
    font-size: 0.85em;
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

.reading-time-box:hover .reading-time-details {
    opacity: 1;
}

.reading-time-words, 
.reading-time-images,
.reading-time-speed {
    padding: 2px 6px;
    border-radius: 3px;
    white-space: nowrap;
    transition: background-color 0.3s ease;
}

/* ===== 自动适应主题颜色模式 ===== */
.reading-time-auto {
    /* 使用常见的CSS变量，如果主题不支持则回退到默认颜色 */
    color: var(--text-color, var(--color-text, var(--main-text-color, inherit))) !important;
    background: linear-gradient(135deg, 
        var(--background-color-secondary, var(--bg-color-secondary, var(--card-bg, rgba(74, 144, 226, 0.08)))),
        var(--background-color-secondary, var(--bg-color-secondary, var(--card-bg, rgba(74, 144, 226, 0.12))))
    )!important;
    backdrop-filter: blur(10px);
    border: 1px solid var(--border-color, var(--color-border, rgba(74, 144, 226, 0.2)));
    position: relative;
    overflow: hidden;
}

/* 添加微妙的光效 */
.reading-time-auto::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.1))), 
        transparent
    );
    transition: left 0.8s ease;
}

.reading-time-auto:hover::before {
    left: 100%;
}

/* 自动适应模式下的图标和分钟数颜色 - 修复透明问题 */
.reading-time-auto .reading-time-icon {
    color: var(--link-color, var(--primary-color, var(--accent-color, #4a90e2)));
    filter: drop-shadow(0 0 3px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.3))));
    text-shadow: 0 0 8px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.4)));
}

/* 修复分钟数透明问题 - 使用实色而非渐变文字 */
.reading-time-auto .reading-time-minutes {
    color: var(--link-color, var(--primary-color, var(--accent-color, #4a90e2))) !important;
    font-weight: 600;
    text-shadow: 0 1px 2px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.2)));
    /* 移除渐变文字效果，改用实色 */
    -webkit-text-fill-color: initial !important;
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
}

/* 自动适应模式下的详细信息颜色 */
.reading-time-auto .reading-time-details {
    color: var(--text-color-secondary, var(--color-text-muted, var(--secondary-text-color, inherit)))!important;
    font-weight: 500;
}

/* 自动适应模式下的详细信息背景 */
.reading-time-auto .reading-time-words,
.reading-time-auto .reading-time-images,
.reading-time-auto .reading-time-speed {
    background: linear-gradient(135deg,
        var(--background-color-tertiary, var(--bg-color-tertiary, rgba(74, 144, 226, 0.12))),
        var(--background-color-tertiary, var(--bg-color-tertiary, rgba(74, 144, 226, 0.18)))
    )!important;
    border: 1px solid var(--border-color, var(--color-border, rgba(74, 144, 226, 0.15)));
    backdrop-filter: blur(5px);
    font-weight: 500;
    letter-spacing: 0.5px;
}

.reading-time-auto:hover .reading-time-words,
.reading-time-auto:hover .reading-time-images,
.reading-time-auto:hover .reading-time-speed {
    background: linear-gradient(135deg,
        var(--background-color-hover, var(--bg-color-hover, rgba(74, 144, 226, 0.18))),
        var(--background-color-hover, var(--bg-color-hover, rgba(74, 144, 226, 0.25)))
    ) !important;
    border-color: var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.3)));
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.2)));
}

/* 图片计数特殊样式 */
.reading-time-images {
    background: linear-gradient(135deg,
        var(--background-color-tertiary, var(--bg-color-tertiary, rgba(74, 144, 226, 0.12))),
        var(--background-color-tertiary, var(--bg-color-tertiary, rgba(74, 144, 226, 0.18)))
    )!important;
    border-color: var(--border-color, var(--color-border, rgba(74, 144, 226, 0.15))) !important;
}

/* ===== 不同背景样式的自动适应 ===== */

/* 左侧边框样式 */
.reading-time-auto.reading-time-border-left {
    border-left: 4px solid var(--link-color, var(--primary-color, var(--accent-color, #4a90e2)));
    border-left-style: solid;
    background: linear-gradient(90deg, 
        var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.08))),
        var(--background-color-secondary, var(--bg-color-secondary, rgba(74, 144, 226, 0.04)))
    );
    position: relative;
}

.reading-time-auto.reading-time-border-left::after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg,
        var(--link-color, var(--primary-color, #4a90e2)),
        var(--link-color, var(--primary-color, #357abd)),
        var(--link-color, var(--primary-color, #4a90e2))
    );
    box-shadow: 0 0 8px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.5)));
}

/* 实心边框样式 */
.reading-time-auto.reading-time-solid-border {
    border: 2px solid var(--link-color, var(--primary-color, var(--accent-color, #4a90e2)));
    background: linear-gradient(135deg,
        var(--background-color-secondary, var(--bg-color-secondary, rgba(74, 144, 226, 0.05))),
        var(--background-color-secondary, var(--bg-color-secondary, rgba(74, 144, 226, 0.1)))
    );
    box-shadow: 
        0 0 0 1px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.1))),
        0 4px 12px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.15)));
}

.reading-time-auto.reading-time-solid-border:hover {
    border-color: var(--link-color, var(--primary-color, #357abd));
    box-shadow: 
        0 0 0 1px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.2))),
        0 6px 20px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.25)));
}

/* 完整背景样式 */
.reading-time-auto.reading-time-full-bg {
    background: linear-gradient(135deg,
        var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.1))),
        var(--background-color-secondary, var(--bg-color-secondary, rgba(74, 144, 226, 0.15)))
    );
    border: 1px solid var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.2)));
    box-shadow: 
        inset 0 1px 0 var(--link-color, var(--primary-color, rgba(255, 255, 255, 0.1))),
        0 4px 12px var(--link-color, var(--primary-color, rgba(74, 144, 226, 0.15)));
}

/* 无背景样式 */
.reading-time-auto.reading-time-none {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    backdrop-filter: none !important;
    padding: 5px 0;
    margin: 10px 0;
}

.reading-time-auto.reading-time-none::before {
    display: none;
}

.reading-time-auto.reading-time-none:hover {
    transform: none;
    box-shadow: none !important;
}

.reading-time-auto.reading-time-none .reading-time-icon {
    filter: none;
    text-shadow: none;
}

.reading-time-auto.reading-time-none .reading-time-minutes {
    text-shadow: none;
}

.reading-time-auto.reading-time-none .reading-time-words,
.reading-time-auto.reading-time-none .reading-time-images,
.reading-time-auto.reading-time-none .reading-time-speed {
    background: var(--background-color-tertiary, var(--bg-color-tertiary, rgba(74, 144, 226, 0.1)));
    border: 1px solid var(--border-color, var(--color-border, rgba(74, 144, 226, 0.15)));
}

/* ===== 暗色模式特殊处理 ===== */
/* 检测暗色模式的几种常见方式 */
@media (prefers-color-scheme: dark) {
    .reading-time-auto {
        /* 暗色模式下使用更深邃的配色 */
        color: var(--text-color, var(--color-text, #e8eaed));
        background: linear-gradient(135deg, 
            var(--background-color-secondary, var(--bg-color-secondary, rgba(64, 156, 255, 0.08))),
            var(--background-color-secondary, var(--bg-color-secondary, rgba(64, 156, 255, 0.12)))
        );
        border-color: var(--border-color, var(--color-border, rgba(64, 156, 255, 0.25)));
    }
    
    .reading-time-auto .reading-time-icon {
        color: var(--link-color, var(--primary-color, #64a8ff));
        filter: drop-shadow(0 0 4px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.4))));
        text-shadow: 0 0 10px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.5)));
    }
    
    /* 暗色模式下的分钟数 - 确保可见 */
    .reading-time-auto .reading-time-minutes {
        color: var(--link-color, var(--primary-color, #64a8ff)) !important;
        -webkit-text-fill-color: initial !important;
        background: none !important;
        text-shadow: 0 0 3px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.3)));
    }
    
    .reading-time-auto .reading-time-details {
        color: var(--text-color-secondary, var(--color-text-muted, #9aa0a6));
    }
    
    .reading-time-auto .reading-time-words,
    .reading-time-auto .reading-time-images,
    .reading-time-auto .reading-time-speed {
        background: linear-gradient(135deg,
            var(--background-color-tertiary, var(--bg-color-tertiary, rgba(100, 168, 255, 0.12))),
            var(--background-color-tertiary, var(--bg-color-tertiary, rgba(100, 168, 255, 0.18)))
        );
        border-color: var(--border-color, var(--color-border, rgba(100, 168, 255, 0.2)));
    }

    .reading-time-auto:hover .reading-time-words,
    .reading-time-auto:hover .reading-time-images,
    .reading-time-auto:hover .reading-time-speed {
        background: linear-gradient(135deg,
            var(--background-color-hover, var(--bg-color-hover, rgba(100, 168, 255, 0.18))),
            var(--background-color-hover, var(--bg-color-hover, rgba(100, 168, 255, 0.28)))
        );
        box-shadow: 0 2px 8px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.25)));
    }

    /* 暗色模式下的不同背景样式 */
    .reading-time-auto.reading-time-border-left {
        background: linear-gradient(90deg, 
            var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.1))),
            var(--background-color-secondary, var(--bg-color-secondary, rgba(100, 168, 255, 0.05)))
        );
        border-left-color: var(--link-color, var(--primary-color, #64a8ff));
    }

    .reading-time-auto.reading-time-border-left::after {
        background: linear-gradient(180deg,
            var(--link-color, var(--primary-color, #64a8ff)),
            var(--link-color, var(--primary-color, #4285f4)),
            var(--link-color, var(--primary-color, #64a8ff))
        );
        box-shadow: 0 0 12px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.6)));
    }

    .reading-time-auto.reading-time-solid-border {
        border-color: var(--link-color, var(--primary-color, #64a8ff));
        background: linear-gradient(135deg,
            var(--background-color-secondary, var(--bg-color-secondary, rgba(100, 168, 255, 0.06))),
            var(--background-color-secondary, var(--bg-color-secondary, rgba(100, 168, 255, 0.12)))
        );
        box-shadow: 
            0 0 0 1px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.15))),
            0 4px 12px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.2)));
    }

    .reading-time-auto.reading-time-full-bg {
        background: linear-gradient(135deg,
            var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.12))),
            var(--background-color-secondary, var(--bg-color-secondary, rgba(100, 168, 255, 0.18)))
        );
        border-color: var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.25)));
        box-shadow: 
            inset 0 1px 0 var(--link-color, var(--primary-color, rgba(255, 255, 255, 0.05))),
            0 4px 12px var(--link-color, var(--primary-color, rgba(100, 168, 255, 0.2)));
    }
    
    /* 暗色模式下的图片计数 */
    .reading-time-auto .reading-time-images {
        background: linear-gradient(135deg,
            rgba(255, 193, 7, 0.12),
            rgba(255, 193, 7, 0.18)
        ) !important;
        border-color: rgba(255, 193, 7, 0.2) !important;
    }
}

/* 通过body类名检测暗色模式 */
body.dark .reading-time-auto,
body.dark-mode .reading-time-auto,
body.theme-dark .reading-time-auto,
.dark .reading-time-auto,
[data-theme="dark"] .reading-time-auto {
    color: var(--text-color, var(--color-text, #e0e0e0));
    background-color: var(--background-color-secondary, var(--bg-color-secondary, rgba(255, 255, 255, 0.05)));
}

/* 确保暗色模式下分钟数可见 */
body.dark .reading-time-auto .reading-time-minutes,
body.dark-mode .reading-time-auto .reading-time-minutes,
body.theme-dark .reading-time-auto .reading-time-minutes,
.dark .reading-time-auto .reading-time-minutes,
[data-theme="dark"] .reading-time-auto .reading-time-minutes {
    color: var(--link-color, var(--primary-color, #64a8ff)) !important;
    -webkit-text-fill-color: initial !important;
}

body.dark .reading-time-auto .reading-time-details,
body.dark-mode .reading-time-auto .reading-time-details,
body.theme-dark .reading-time-auto .reading-time-details,
.dark .reading-time-auto .reading-time-details,
[data-theme="dark"] .reading-time-auto .reading-time-details {
    color: var(--text-color-secondary, var(--color-text-muted, #a0a0a0));
}

body.dark .reading-time-auto .reading-time-words,
body.dark .reading-time-auto .reading-time-images,
body.dark .reading-time-auto .reading-time-speed,
body.dark-mode .reading-time-auto .reading-time-words,
body.dark-mode .reading-time-auto .reading-time-images,
body.dark-mode .reading-time-auto .reading-time-speed,
body.theme-dark .reading-time-auto .reading-time-words,
body.theme-dark .reading-time-auto .reading-time-images,
body.theme-dark .reading-time-auto .reading-time-speed,
.dark .reading-time-auto .reading-time-words,
.dark .reading-time-auto .reading-time-images,
.dark .reading-time-auto .reading-time-speed,
[data-theme="dark"] .reading-time-auto .reading-time-words,
[data-theme="dark"] .reading-time-auto .reading-time-images,
[data-theme="dark"] .reading-time-auto .reading-time-speed {
    background-color: var(--background-color-tertiary, var(--bg-color-tertiary, rgba(255, 255, 255, 0.08)));
}

/* ===== 固定颜色模式保持原样 ===== */
.reading-time-fixed[style*="background-color:transparent"] {
    padding: 5px 0;
    margin: 10px 0;
    box-shadow: none !important;
}

.reading-time-fixed[style*="background-color:transparent"]:hover {
    transform: none;
    box-shadow: none;
}

.reading-time-fixed .reading-time-words,
.reading-time-fixed .reading-time-images,
.reading-time-fixed .reading-time-speed {
    background-color: rgba(0, 0, 0, 0.05);
}

.reading-time-fixed:hover .reading-time-words,
.reading-time-fixed:hover .reading-time-images,
.reading-time-fixed:hover .reading-time-speed {
    background-color: rgba(0, 0, 0, 0.08);
}

/* 固定颜色模式的图片计数 */
.reading-time-fixed .reading-time-images {
    background-color: rgba(255, 193, 7, 0.1);
}

.reading-time-fixed:hover .reading-time-images {
    background-color: rgba(255, 193, 7, 0.15);
}

/* ===== 响应式调整 ===== */
@media (max-width: 768px) {
    .reading-time-box {
        flex-wrap: wrap;
        padding: 8px 12px;
        gap: 6px;
    }
    
    .reading-time-details {
        margin-left: 0;
        width: 100%;
        justify-content: flex-end;
    }
    
    /* 移动端无背景样式更紧凑 */
    .reading-time-box[style*="background-color:transparent"],
    .reading-time-auto.reading-time-none {
        padding: 3px 0;
        margin: 8px 0;
    }
}